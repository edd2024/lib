var Lib=function(t){"use strict";class e{constructor(t,e={}){this.container=t,this.stage=t.querySelector(".stage"),this.cards=Array.from(t.querySelectorAll(".card")),this.prevBtn=t.querySelector(".prev-btn"),this.nextBtn=t.querySelector(".next-btn"),this.indicatorsWrap=t.querySelector(".indicator"),this.counterEl=t.querySelector(".card-counter"),this.index=0,this.isAnimating=!1,this.config={maxVisibleStack:parseInt(t.dataset.maxVisibleStack)||3,swipeThreshold:50,xOffset:-2,zOffset:-6,opacityStep:.15,minOpacity:.45,...e},this.indicatorsWrap&&this.setupIndicators(),this.update(),this.bind()}setupIndicators(){this.indicatorsWrap.innerHTML="",this.indicators=this.cards.map((t,e)=>{const s=document.createElement("div");return s.className="dot"+(0===e?" active":""),s.addEventListener("click",()=>this.goTo(e)),this.indicatorsWrap.appendChild(s),s})}bind(){this.nextBtn&&this.nextBtn.addEventListener("click",()=>this.next()),this.prevBtn&&this.prevBtn.addEventListener("click",()=>this.prev());let t=0,e=0;this.container.addEventListener("touchstart",s=>{t=s.touches[0].clientX,e=s.touches[0].clientY},{passive:!0}),this.container.addEventListener("touchend",s=>{const i=s.changedTouches[0].clientX-t,n=s.changedTouches[0].clientY-e;this.handleSwipe(i,n)},{passive:!1}),this.container.setAttribute("tabindex","0"),this.container.addEventListener("keydown",t=>{"ArrowRight"!==t.key&&"ArrowUp"!==t.key||this.next(),"ArrowLeft"!==t.key&&"ArrowDown"!==t.key||this.prev()})}handleSwipe(t,e){const s=Math.abs(t)>Math.abs(e)&&Math.abs(t)>this.config.swipeThreshold,i=Math.abs(e)>Math.abs(t)&&Math.abs(e)>this.config.swipeThreshold;s?t<0?this.next():this.prev():i&&(e<0?this.next():this.prev())}rel(t){return(t+this.cards.length)%this.cards.length}update(){this.cards.forEach(t=>{t.classList.remove("leaving-up")});for(let t=0;t<=this.config.maxVisibleStack;t++){const e=this.rel(this.index+t),s=this.cards[e];if(!s)continue;const i=t*this.config.xOffset,n=t*this.config.zOffset,a=0===t?1:Math.max(this.config.minOpacity,1-t*this.config.opacityStep);0===t?(s.classList.add("active"),s.style.transform="translateZ(0) rotateY(0deg)",s.style.opacity="1",s.style.zIndex=String(this.config.maxVisibleStack+2),s.style.pointerEvents="auto"):(s.classList.remove("active"),s.style.transform=`translateX(${i}rem) translateZ(${n}rem) rotateY(12deg)`,s.style.opacity=String(a),s.style.zIndex=String(this.config.maxVisibleStack+2-t),s.style.pointerEvents="auto")}this.cards.forEach((t,e)=>{(e-this.index+this.cards.length)%this.cards.length>this.config.maxVisibleStack&&(t.style.transform="translateZ(0) rotateY(12deg)",t.style.opacity="0",t.style.zIndex="0",t.style.pointerEvents="none")}),this.counterEl&&(this.counterEl.textContent=`${this.index+1}/${this.cards.length}`),this.indicators&&this.indicators.forEach((t,e)=>t.classList.toggle("active",e===this.index))}animateLeaveUp(t,e){t.offsetWidth,t.style.zIndex=String(this.config.maxVisibleStack+3),t.style.pointerEvents="none",t.style.transform="translateY(-5rem) rotateY(12deg)",t.style.opacity="0";const s=i=>{t.removeEventListener("transitionend",s),e()};t.addEventListener("transitionend",s,{once:!0})}next(){if(this.isAnimating)return;this.isAnimating=!0;const t=this.cards[this.index];this.animateLeaveUp(t,()=>{this.index=this.rel(this.index+1),this.stage.classList.add("no-anim"),this.update(),this.stage.offsetWidth,this.stage.classList.remove("no-anim"),this.isAnimating=!1})}prev(){if(this.isAnimating)return;this.isAnimating=!0;const t=this.cards[this.index];this.animateLeaveUp(t,()=>{this.index=this.rel(this.index-1),this.stage.classList.add("no-anim"),this.update(),this.stage.offsetWidth,this.stage.classList.remove("no-anim"),this.isAnimating=!1})}goTo(t){if(t===this.index||this.isAnimating)return;this.isAnimating=!0;const e=this.cards[this.index];this.animateLeaveUp(e,()=>{this.index=this.rel(t),this.stage.classList.add("no-anim"),this.update(),this.stage.offsetWidth,this.stage.classList.remove("no-anim"),this.isAnimating=!1})}}return document.addEventListener("DOMContentLoaded",()=>{document.querySelectorAll(".card-stack-3d").forEach(t=>new e(t))}),document.addEventListener("DOMContentLoaded",()=>{const t={loopSpeed:600,breakpoints:[{max:766,items:1,orientation:"vertical"},{max:1022,items:2,orientation:"horizontal"},{max:1399,items:3,orientation:"horizontal"},{max:1/0,items:3,orientation:"horizontal"}]},e=document.querySelectorAll(".progress-nav"),s=document.querySelectorAll(".progress-count"),i=document.querySelectorAll(".progress-container");e.forEach((e,n)=>{const a=e.querySelector(".progress-bar-wrapper"),r=a.querySelector(".progress-bar"),o=r.querySelector(".progress"),c=a.querySelector(".progress-indicator"),l=e.querySelector(".prev"),h=e.querySelector(".next"),d=s[n],p=d?.querySelector(".current"),m=d?.querySelector(".total"),u=i[n];let g=null,y=t.loopSpeed,f="horizontal",x=3,v=[],L=[],S=!1,E=[],b=0,w=1,A=1,q=null,k=null,$=[],C=!1;function M(){const t=a.getBoundingClientRect();if(v=L.map(e=>{const s=e.getBoundingClientRect();return{x:s.left+s.width/2-t.left,y:s.top+s.height/2-t.top}}),!L.length)return;const e=v[0],s=v[v.length-1];if("horizontal"===f){const t=r.offsetHeight||8,i=e.y-t/2;r.style.top=`${i}px`,r.style.left=`${e.x}px`,r.style.width=`${Math.max(0,s.x-e.x)}px`,r.style.height=`${t}px`}else{const t=r.offsetWidth||8,i=e.x-t/2;r.style.left=`${i}px`,r.style.top=`${e.y}px`,r.style.height=`${Math.max(0,s.y-e.y)}px`,r.style.width=`${t}px`}}function T(){v.length||M();const t=v[0]||{x:0,y:0},e=v[w-1]||t;"horizontal"===f?(o.style.transition=`width ${y}ms ease-in-out`,o.style.width=1===w?"0px":`${Math.max(0,e.x-t.x)}px`,o.style.height="100%"):(o.style.transition=`height ${y}ms ease-in-out`,o.style.height=1===w?"0px":`${Math.max(0,e.y-t.y)}px`,o.style.width="100%"),p&&(p.textContent=w)}function N(){c.querySelectorAll(".step").forEach((t,e)=>{t.classList.remove("active","completed"),e+1<w&&t.classList.add("completed"),e+1===w&&t.classList.add("active")})}function z(t=!1){const e=-100*A;g.style.transition=t?"none":`transform ${y}ms ease-in-out`,g.style.transform=`translateX(${e}%)`}function W(t){S||(S=!0,w=Math.min(Math.max(t,1),b),A=w,N(),T(),z(!1),setTimeout(()=>{S=!1},y))}function O(){S||(S=!0,A+=1,g.style.transition=`transform ${y}ms ease-in-out`,g.style.transform=`translateX(${-100*A}%)`,w=w===b?1:w+1,N(),T(),setTimeout(()=>{A===b+1&&(A=1,z(!0)),S=!1},y+20))}function B(){S||(S=!0,A-=1,g.style.transition=`transform ${y}ms ease-in-out`,g.style.transform=`translateX(${-100*A}%)`,w=1===w?b:w-1,N(),T(),setTimeout(()=>{0===A&&(A=b,z(!0)),S=!1},y+20))}function I(){!function(){const s=e.getAttribute("data-breakpoints");let i=t.breakpoints;if(s)try{i=JSON.parse(s)}catch(t){console.warn("Invalid data-breakpoints JSON",t)}const n=window.innerWidth,a=i.find(t=>n<=t.max)||i[i.length-1];f=a.orientation,x=a.items}(),function(){g=u.querySelector(".progress-track"),g||(g=document.createElement("div"),g.className="progress-track",Array.from(u.querySelectorAll(".progress-section")).forEach(t=>g.appendChild(t)),u.appendChild(g));g.style.display="flex",g.style.flexWrap="nowrap",g.style.willChange="transform",g.style.width="100%"}(),g.querySelectorAll(".progress-section.generated, .progress-section.clone").forEach(t=>t.remove()),$=Array.from(g.querySelectorAll(".progress-section")).filter(t=>!t.classList.contains("clone")&&!t.classList.contains("generated")),C=$.some(t=>t.querySelector(".item")),function(){if(E=[],C){const t=[];$.forEach(e=>{e.querySelectorAll(".item").forEach(e=>{t.push(e.cloneNode(!0))}),e.style.display="none"});for(let e=0;e<t.length;e+=x){const s=document.createElement("div");s.className="progress-section generated",t.slice(e,e+x).forEach(t=>s.appendChild(t)),g.appendChild(s),E.push(s)}}else $.forEach(t=>t.style.display=""),E=[...$];b=E.length,m&&(m.textContent=b)}(),E.length&&(q=E[0].cloneNode(!0),q.classList.add("clone"),k=E[E.length-1].cloneNode(!0),k.classList.add("clone"),g.insertBefore(k,g.firstChild),g.appendChild(q)),c.innerHTML="",L=[],E.forEach((t,e)=>{const s=document.createElement("button");s.className="step";const i=document.createElement("div");i.className="circle",i.textContent=e+1;const n=document.createElement("span");n.className="label",n.textContent=t.dataset.label||`Step ${e+1}`,s.appendChild(i),s.appendChild(n),c.appendChild(s),L.push(i),s.addEventListener("click",()=>W(e+1))}),w=1,A=1,requestAnimationFrame(()=>{requestAnimationFrame(()=>{M(),N(),T(),z(!0)})})}!function(){const t=parseInt(e?.dataset?.speed??"",10);Number.isNaN(t)||(y=t)}(),I(),window.addEventListener("resize",I),window.addEventListener("orientationchange",I),l?.addEventListener("click",B),h?.addEventListener("click",O);let Y=0,X=0,V=0,U=0;document.addEventListener("touchstart",t=>{Y=t.changedTouches[0].screenX,X=t.changedTouches[0].screenY},{passive:!0}),document.addEventListener("touchend",t=>{V=t.changedTouches[0].screenX,U=t.changedTouches[0].screenY;const e=V-Y,s=U-X;Math.abs(e)>Math.abs(s)?(e<-2&&O(),e>2&&B()):(s<-2&&O(),s>2&&B())},{passive:!0}),window.setLoopSpeed=t=>{y=+t||y,I()},window.setProgress=W})}),t.initLib=function(){},t}({});
